Verify
========
	Nexmo Verify SDK(beta version) for Android.
Nexmo Verify enables you to verify whether one of your end users has access to a specific phone number by challenging them with
a PIN code to enter into your application or website. This PIN code is delivered by Nexmo via SMS and/or TTS (an automated Text
To Speech) call. Your end users then enter this code into your application and subsequently, you can check through Verify if 
the code entered matches the one which was sent to the user. This completes a phone verification successfully.

The Nexmo Verify SDK for Android enables you to build Verify into your Android Application by simplifying this integration.
If you import this library into your application, you simply need the user's phone number and the SDK will take care of the
various steps required to verify your users.

Getting Started
==============

1. You need a Nexmo account to use the SDK. Register for one (if you don't have it already) at:
   https://dashboard.nexmo.com/register
2. In order to safeguard your Nexmo credentials, all interaction between your application and Nexmo services requires an 
   Application ID (configured per application you want to use the SDK with) and a corresponding Shared Secret (that is 
   generated by the system). _Please note that these are completely separate from your NEXMO API Key and Secret, which MUST NOT
   be embedded in your application. Your Nexmo API Key & Secret are 8-character Alpha-Numeric values; whereas your SDK
   Application ID would be 25 character AlNum, and your Shared Secret will be 15 character AlNum._

   As we are in the early stages of the Beta, please send us an email at: productfeedback@nexmo.com and we will set up an 
   application ID and a Shared Secret Key for your application.
   We're working to allow you to setup a new Application using the Customer Dashboard where you will be able to obtain an
   ApplicationId and SharedSecretKey - Watch out for it in an upcoming update.
3. Download the Nexmo Verify SDK as below.

Download
========

Clone this repository and reference the local aar file. (Once the project is out of Limited Beta, this step wouldn't be
necessary.)
In a file explorer (not Android Studio), drag the verify-beta0.2.aar file into the /app/libs directory
in your project’s root directory.

In Android Studio, edit the build.gradle file in the app directory (it can also be labelled as Module: app)
and change its contents to the following:
```java
repositories {
    mavenCentral()
    flatDir {
        dirs 'libs'
    }
}
```
Then reference the library in the dependency section:
```java
dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])

compile 'com.nexmo.sdk:verify-beta0.2@aar'
```
Don’t forget to add the flatDir entry to the repositories section. Otherwise Gradle will not be able to locate the aar.

Verify Android SDK requires a minimum Android version of 2.1.

Getting Started
==============

Import the VerifySample application into Android Studio.
Set your applicationId and sharedSecretKey as meta-data in AndroidManifest.xml file.
```xml
        <meta-data android:name="applicationId" android:value="yourApplicationId" />
        <meta-data android:name="sharedSecretKey" android:value="yourSharedSecretKey" />
```
Run the sample on your handset, using your own phone number.

Implementation
==============

Creating a new Nexmo Client:
```java
import com.nexmo.sdk.NexmoClient;

import com.nexmo.sdk.core.client.ClientBuilderException;

import com.nexmo.sdk.verify.client.VerifyClient;
import com.nexmo.sdk.verify.event.VerifyClientListener;
import com.nexmo.sdk.verify.event.VerifyError;

Context context = getApplicationContext();
try {
	NexmoClient nexmoClient = new NexmoClient.NexmoClientBuilder()
                    .context(context)
                    .applicationId(APPLICATION_ID) //your application key
                    .sharedSecretKey(SHARED_KEY) //your application secret
                    .build();
} catch (ClientBuilderException e) {
	e.printStackTrace();
}
```
REMINDER: For the security of your Nexmo account, you should not use your Nexmo Account ID or Nexmo Account Secret anywhere in the 
code.

Now let's aquire a new Verify Client object that does all the verification magic.
```java
verifyClient = new VerifyClient(nexmoClient);
```

Remember to register for receiving verify status events, in case you want to update you application's UI accordingly.
```java
verifyClient.addVerifyListener(new VerifyClientListener() {
        @Override
        public void onVerifyInProgress(final VerifyClient verifyClient) {
        }

        @Override
        public void onUserVerified(final VerifyClient verifyClient) {
        }

        @Override
        public void onError(final VerifyClient verifyClient, final com.nexmo.sdk.verify.event.VerifyError errorCode) {
        }

        @Override
        public void onException(final IOException exception) {
        }
    });
```
A new verification is initiated using a supplied country code and phone number.
```java
verifyClient.getVerifiedUser("GB", "07000000000");
```
Even if a user enters the phone number with the country code, the library will determine the correct internationalised 
phone number for use.

When the verification is successfully started VerifyClientListener.onVerifyInProgress(final VerifyClient verifyClient) is invoked.

If the verification cannot be started VerifyClientListener.onError(final VerifyClient verifyClient, final com.nexmo.sdk.verify.event.VerifyError errorCode); is invoked describing the error.

Anytime the PIN code has been received by the end user, it should be supplied to the verify client:
```java
verifyClient.checkPinCode("1234");
```

A successful verification will be completed once the VerifyClientListener.onUserVerified(final VerifyClient verifyClient) event is 
invoked.

Verify SDK generates an SMS to verify a user if the user is unverified. Once users are verified, Verify maintains this state
on the server. By default, any change in the combination - Device ID + Application ID + Phone Number - is considered a new user
and will be explicitly verified by 2FA. Once verified, users remain verified on the server for 30 days. We're working on 
enabling the following customisations in a future version of the library:
- If we should disregard either or both of Device ID and Application ID
- if a user should be reverified everytime, never, or a custom duration (other than 30 days) in between

Please note that sensitive user details, like the phone number will NOT be stored locally at any time. You can persist the 
information in your local storage if you so wish, however this may not be the best for your user's security.

License
=======

Copyright (c) 2015 Nexmo, Inc.
All rights reserved.
Licensed only under the Nexmo Verify SDK License Agreement (the "License") located at

	https://www.nexmo.com/terms-use/verify-sdk/

By downloading or otherwise using our software or services, you acknowledge
that you have read, understand and agree to be bound by the 
[Nexmo Verify SDK License Agreement][1] and [Privacy Policy][2].
    
You may not use, exercise any rights with respect to or exploit this SDK,
or any modifications or derivative works thereof, except in accordance with the License.

 [1]: https://www.nexmo.com/terms-use/verify-sdk/
 [2]: https://www.nexmo.com/privacy-policy/
